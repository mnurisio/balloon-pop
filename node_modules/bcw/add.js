#!/usr/bin/env node
let inquirer = require("inquirer")
const { printAlert, clearScreen, colors, printSuccess } = require("./utils/console-utils")
let { execSync } = require("child_process")

const templates = [
  "js-tests",
  "workflow_docker_ec2"
]

//prompts and the name of properties added to the answers object
const prompts = [
  {
    name: "package-choice",
    type: "list",
    message: "What Package would you like to add?",
    choices: templates
  }
]


async function add() {
  // @ts-ignore
  const answers = await inquirer.prompt(prompts)
  let package = answers["package-choice"]

  try {
    clearScreen()
    console.group(colors.FgMagenta, "---ADDING PACKAGE---")
    execSync(`npx create-project ./ codeworks-templates/${package}`)
    printSuccess("[+] Package Added")
    console.groupEnd()
  } catch (e) {
    printAlert(`[!] ${e.message}`, e)
  }
}


async function start() {
  try {
    await add()
  } catch (e) {
    console.error(e)
  }
}

start()




